var hljs=new function(){var k={};var b={};function l(o){return o.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function e(q,p){if(!q){return false}for(var o=0;o<q.length;o++){if(q[o]==p){return true}}return false}function d(C,E){function D(O,P){O.sub_modes=[];for(var N=0;N<O.contains.length;N++){for(var M=0;M<P.modes.length;M++){if(P.modes[M].className==O.contains[N]){O.sub_modes[O.sub_modes.length]=P.modes[M]}}}}function q(M,O){if(!O.contains){return null}if(!O.sub_modes){D(O,F)}for(var N=0;N<O.sub_modes.length;N++){if(O.sub_modes[N].beginRe.test(M)){return O.sub_modes[N]}}return null}function x(N,M){if(o[N].end&&o[N].endRe.test(M)){return 1}if(o[N].endsWithParent){var O=x(N-1,M);return O?O+1:0}return 0}function y(M,N){return N.illegalRe&&N.illegalRe.test(M)}function L(R,S){var N=[];function Q(T){if(!e(N,T)){N[N.length]=T}}if(R.contains){for(var P=0;P<S.modes.length;P++){if(e(R.contains,S.modes[P].className)){Q(S.modes[P].begin)}}}var O=o.length-1;do{if(o[O].end){Q(o[O].end)}O--}while(o[O+1].endsWithParent);if(R.illegal){Q(R.illegal)}var M="("+N[0];for(var P=0;P<N.length;P++){M+="|"+N[P]}M+=")";return g(S,M)}function p(O,N){var P=o[o.length-1];if(!P.terminators){P.terminators=L(P,F)}O=O.substr(N);var M=P.terminators.exec(O);if(!M){return[O,"",true]}if(M.index==0){return["",M[0],false]}else{return[O.substr(0,M.index),M[0],false]}}function B(Q,M){var O=F.case_insensitive?M[0].toLowerCase():M[0];for(var N in Q.keywordGroups){if(!Q.keywordGroups.hasOwnProperty(N)){continue}var P=Q.keywordGroups[N].hasOwnProperty(O);if(P){return[N,P]}}return false}function G(N,T){if(!T.keywords||!T.lexems){return l(N)}if(!T.lexemsRe){var S="("+T.lexems[0];for(var P=1;P<T.lexems.length;P++){S+="|"+T.lexems[P]}S+=")";T.lexemsRe=g(F,S,true)}var M="";var R=0;T.lexemsRe.lastIndex=0;var O=T.lexemsRe.exec(N);while(O){M+=l(N.substr(R,O.index-R));var Q=B(T,O);if(Q){z+=Q[1];M+='<span class="'+Q[0]+'">'+l(O[0])+"</span>"}else{M+=l(O[0])}R=T.lexemsRe.lastIndex;O=T.lexemsRe.exec(N)}M+=l(N.substr(R,N.length-R));return M}function K(N,O){if(O.subLanguage&&b[O.subLanguage]){var M=d(O.subLanguage,N);z+=M.keyword_count;u+=M.relevance;return M.value}else{return G(N,O)}}function J(O,M){var N=O.noMarkup?"":'<span class="'+O.className+'">';if(O.returnBegin){A+=N;O.buffer=""}else{if(O.excludeBegin){A+=l(M)+N;O.buffer=""}else{A+=N;O.buffer=M}}o[o.length]=O}function H(P,O,N){var T=o[o.length-1];if(N){A+=K(T.buffer+P,T);return false}var R=q(O,T);if(R){A+=K(T.buffer+P,T);J(R,O);u+=R.relevance;return R.returnBegin}var M=x(o.length-1,O);if(M){var Q=T.noMarkup?"":"</span>";if(T.returnEnd){A+=K(T.buffer+P,T)+Q}else{if(T.excludeEnd){A+=K(T.buffer+P,T)+Q+l(O)}else{A+=K(T.buffer+P+O,T)+Q}}while(M>1){Q=o[o.length-2].noMarkup?"":"</span>";A+=Q;M--;o.length--}o.length--;o[o.length-1].buffer="";if(T.starts){for(var S=0;S<F.modes.length;S++){if(F.modes[S].className==T.starts){J(F.modes[S],"");break}}}return T.returnEnd}if(y(O,T)){throw"Illegal"}}var F=k[C];var o=[F.defaultMode];var u=0;var z=0;var A="";try{var w=0;F.defaultMode.buffer="";do{var r=p(E,w);var s=H(r[0],r[1],r[2]);w+=r[0].length;if(!s){w+=r[1].length}}while(!r[2]);if(o.length>1){throw"Illegal"}return{relevance:u,keyword_count:z,value:A}}catch(I){if(I=="Illegal"){return{relevance:0,keyword_count:0,value:l(E)}}else{throw I}}}function h(q){var o="";for(var p=0;p<q.childNodes.length;p++){if(q.childNodes[p].nodeType==3){o+=q.childNodes[p].nodeValue}else{if(q.childNodes[p].nodeName=="BR"){o+="\n"}else{throw"No highlight"}}}return o}function a(q){var p=q.className.split(/\s+/);for(var o=0;o<p.length;o++){if(p[o]=="no-highlight"){throw"No highlight"}if(k[p[o]]){return p[o]}}}function m(q,y){try{var A=h(q);var w=a(q)}catch(x){if(x=="No highlight"){return}}if(w){var C=d(w,A).value}else{var B=0;for(var z in b){if(!b.hasOwnProperty(z)){continue}var p=d(z,A);var u=p.keyword_count+p.relevance;if(u>B){B=u;var C=p.value;w=z}}}if(C){if(y){C=C.replace(/^(\t+)/gm,function(D,G,F,E){return G.replace(/\t/g,y)})}var s=q.className;if(!s.match(w)){s+=" "+w}var o=document.createElement("div");o.innerHTML='<pre><code class="'+s+'">'+C+"</code></pre>";var r=q.parentNode.parentNode;r.replaceChild(o.firstChild,q.parentNode)}}function g(r,p,o){var q="m"+(r.case_insensitive?"i":"")+(o?"g":"");return new RegExp(p,q)}function i(){for(var p in k){if(!k.hasOwnProperty(p)){continue}var q=k[p];for(var o=0;o<q.modes.length;o++){if(q.modes[o].begin){q.modes[o].beginRe=g(q,"^"+q.modes[o].begin)}if(q.modes[o].end){q.modes[o].endRe=g(q,"^"+q.modes[o].end)}if(q.modes[o].illegal){q.modes[o].illegalRe=g(q,"^(?:"+q.modes[o].illegal+")")}q.defaultMode.illegalRe=g(q,"^(?:"+q.defaultMode.illegal+")");if(q.modes[o].relevance==undefined){q.modes[o].relevance=1}}}}function f(){function o(u){if(!u.keywordGroups){for(var s in u.keywords){if(!u.keywords.hasOwnProperty(s)){continue}if(u.keywords[s] instanceof Object){u.keywordGroups=u.keywords}else{u.keywordGroups={keyword:u.keywords}}break}}}for(var q in k){if(!k.hasOwnProperty(q)){continue}var r=k[q];o(r.defaultMode);for(var p=0;p<r.modes.length;p++){o(r.modes[p])}}}function c(p){for(var o=0;o<p.childNodes.length;o++){node=p.childNodes[o];if(node.nodeName=="CODE"){return node}if(!(node.nodeType==3&&node.nodeValue.match(/\s+/))){return null}}}function n(){if(n.called){return}n.called=true;i();f();if(arguments.length){for(var o=0;o<arguments.length;o++){if(k[arguments[o]]){b[arguments[o]]=k[arguments[o]]}}}else{b=k}var q=document.getElementsByTagName("pre");for(var o=0;o<q.length;o++){var p=c(q[o]);if(p){m(p,hljs.tabReplace)}}}function j(){var o=arguments;var p=function(){n.apply(null,o)};if(window.addEventListener){window.addEventListener("DOMContentLoaded",p,false);window.addEventListener("load",p,false)}else{if(window.attachEvent){window.attachEvent("onload",p)}else{window.onload=p}}}this.LANGUAGES=k;this.highlight=d;this.initHighlightingOnLoad=j;this.highlightBlock=m;this.initHighlighting=n;this.IDENT_RE="[a-zA-Z][a-zA-Z0-9_]*";this.UNDERSCORE_IDENT_RE="[a-zA-Z_][a-zA-Z0-9_]*";this.NUMBER_RE="\\b\\d+(\\.\\d+)?";this.C_NUMBER_RE="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";this.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:["escape"],relevance:0};this.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:["escape"],relevance:0};this.BACKSLASH_ESCAPE={className:"escape",begin:"\\\\.",end:"^",noMarkup:true,relevance:0};this.C_LINE_COMMENT_MODE={className:"comment",begin:"//",end:"$",relevance:0};this.C_BLOCK_COMMENT_MODE={className:"comment",begin:"/\\*",end:"\\*/"};this.HASH_COMMENT_MODE={className:"comment",begin:"#",end:"$"};this.C_NUMBER_MODE={className:"number",begin:this.C_NUMBER_RE,end:"^",relevance:0}}();var initHighlightingOnLoad=hljs.initHighlightingOnLoad;hljs.LANGUAGES.sql={case_insensitive:true,defaultMode:{lexems:[hljs.IDENT_RE],contains:["string","number","comment"],keywords:{keyword:{all:1,partial:1,global:1,month:1,current_timestamp:1,using:1,go:1,revoke:1,smallint:1,indicator:1,"end-exec":1,disconnect:1,zone:1,"with":1,character:1,assertion:1,to:1,add:1,current_user:1,usage:1,input:1,local:1,alter:1,match:1,collate:1,real:1,then:1,rollback:1,get:1,read:1,timestamp:1,session_user:1,not:1,integer:1,bit:1,unique:1,day:1,minute:1,desc:1,insert:1,execute:1,like:1,ilike:2,level:1,decimal:1,drop:1,"continue":1,isolation:1,found:1,where:1,constraints:1,domain:1,right:1,national:1,some:1,module:1,transaction:1,relative:1,second:1,connect:1,escape:1,close:1,system_user:1,"for":1,deferred:1,section:1,cast:1,current:1,sqlstate:1,allocate:1,intersect:1,deallocate:1,numeric:1,"public":1,preserve:1,full:1,"goto":1,initially:1,asc:1,no:1,key:1,output:1,collation:1,group:1,by:1,union:1,session:1,both:1,last:1,language:1,constraint:1,column:1,of:1,space:1,foreign:1,deferrable:1,prior:1,connection:1,unknown:1,action:1,commit:1,view:1,or:1,first:1,into:1,"float":1,year:1,primary:1,cascaded:1,except:1,restrict:1,set:1,references:1,names:1,table:1,outer:1,open:1,select:1,size:1,are:1,rows:1,from:1,prepare:1,distinct:1,leading:1,create:1,only:1,next:1,inner:1,authorization:1,schema:1,corresponding:1,option:1,declare:1,precision:1,immediate:1,"else":1,timezone_minute:1,external:1,varying:1,translation:1,"true":1,"case":1,exception:1,join:1,hour:1,"default":1,"double":1,scroll:1,value:1,cursor:1,descriptor:1,values:1,dec:1,fetch:1,procedure:1,"delete":1,and:1,"false":1,"int":1,is:1,describe:1,"char":1,as:1,at:1,"in":1,varchar:1,"null":1,trailing:1,any:1,absolute:1,current_time:1,end:1,grant:1,privileges:1,when:1,cross:1,check:1,write:1,current_date:1,pad:1,begin:1,temporary:1,exec:1,time:1,update:1,catalog:1,user:1,sql:1,date:1,on:1,identity:1,timezone_hour:1,natural:1,whenever:1,interval:1,work:1,order:1,cascade:1,diagnostics:1,nchar:1,having:1,left:1},aggregate:{count:1,sum:1,min:1,max:1,avg:1}}},modes:[hljs.C_NUMBER_MODE,hljs.C_BLOCK_COMMENT_MODE,{className:"comment",begin:"--",end:"$"},{className:"string",begin:"'",end:"'",contains:["escape","squote"],relevance:0},{className:"squote",begin:"''",end:"^",noMarkup:true},{className:"string",begin:'"',end:'"',contains:["escape","dquote"],relevance:0},{className:"dquote",begin:'""',end:"^",noMarkup:true},{className:"string",begin:"`",end:"`",contains:["escape"]},hljs.BACKSLASH_ESCAPE]};Ext.namespace("AeroSQL");AeroSQL.About=Ext.extend(Ext.Window,{initComponent:function(){var a='<div style="text-align:center"><a target="_blank" href="http://www.burlaca.com/aerosql/"><img src="i/aerosql-logo.png" width="235" height="64" title="AeroSQL" alt="AeroSQL" /></a></div>';a+='<div style="line-height: 1.7"><p>Author: <a href="mailto:oleg@burlaca.com">Oleg Burlaca</a></p>';a+='<p>Homepage: <a onclick="window.open(this.href); return false;" href="http://www.burlaca.com/aerosql/">www.burlaca.com/aerosql</a></p>';a+='<img style="vertical-align: middle" src="i/lifebuoy.png" height="16" width="16"> <a target="_blank" href="http://www.burlaca.com/donate/"><b>Donate</b></a> to support development<br />';a+='<div style="color: #777; line-height: 1.2; padding: 15px 0px">';a+='<div style="text-align:center; padding-bottom: 10px"><img style="vertical-align: middle" src="i/gplv3-88x31.png" alt="GPLv3" title="GPLv3" /></div>';a+="Copyright (C) 2009  Oleg Burlaca<br />";a+="This program comes with ABSOLUTELY NO WARRANTY<br />";a+="This is free software, and you are welcome to redistribute it</div>";a+="</div>";a+='Iconpack: <a onclick="window.open(this.href); return false;" href="http://www.pinvoke.com/">Fugue Icons</a><br /><br />';a+="Powered By:";a+='<table style="width: 100%; background-color: #fff"><tr>';a+='<td><a onclick="window.open(this.href); return false;" href="http://www.extjs.com/"><img src="i/logo_extjs.png" width="90" height="22" alt="ExtJS - A foundation you can build on" title="ExtJS - A foundation you can build on" /></a></td>';a+='<td style="text-align: center"><a onclick="window.open(this.href); return false;" href=""><img src="i/logo_php.gif" width="44" height="26" alt="PHP - Hypertext Preprocessor" title="PHP - Hypertext Preprocessor" /></a></td>';a+='<td style="text-align: right"><a onclick="window.open(this.href); return false;" href="http://mysql.com/"><img src="i/logo_mysql.gif" width="65" height="29" alt="MySql - The world\'s most popular open source database" title="MySql - The world\'s most popular open source database" /></a></td>';a+="</tr></table>";Ext.apply(this,{title:"About AeroSQL",plain:true,closable:true,iconCls:"icon-info",height:380,width:300,layout:"fit",border:false,html:a,resizable:false,buttonAlign:"center",buttons:[{text:"OK",handler:function(){this.close()},scope:this}]});AeroSQL.About.superclass.initComponent.apply(this,arguments)}});Ext.namespace("AeroSQL");AeroSQL.DBTable=Ext.extend(Ext.Panel,{initComponent:function(){this.sqlGrid=new AeroSQL.EditorSqlGridPanel({border:false,mode:"table",serverId:this.serverId,forceFit:true,dbName:this.dbName,tblName:this.tblName,tblColumns:"*"});this.add(this.sqlGrid);Ext.apply(this,{title:this.dbName+"."+this.tblName,closable:true,iconCls:"icon-tbl",layout:"fit",items:[this.sqlGrid],tbar:[{text:"Manage Columns",iconCls:"icon-col_man",disabled:true,scope:this},{text:"Manage Indexes",iconCls:"icon-idx_man",disabled:true,scope:this}]});AeroSQL.DBTable.superclass.initComponent.apply(this,arguments)},afterRender:function(){AeroSQL.DBTable.superclass.afterRender.apply(this,arguments);this.sqlGrid.openTable.defer(100,this.sqlGrid)}});Ext.namespace("AeroSQL");AeroSQL.DBTree=Ext.extend(Ext.tree.TreePanel,{initComponent:function(){Ext.apply(this,{loader:new Ext.tree.TreeLoader({dataUrl:AeroSQL.ENGINE_URL,baseParams:{cmd:"getMainTree"}}),tbar:[{text:"",iconCls:"icon-plus",handler:this.addNewObj,scope:this,disabled:true},{text:"",iconCls:"icon-minus",handler:this.onDeleteNodes,scope:this},"-",{iconCls:"icon-edit",handler:this.editNode,scope:this,disabled:true},{iconCls:"icon-gear",handler:this.manageNode,scope:this,hidden:true},"-",{iconCls:"icon-sql",handler:this.newSqlQuery,scope:this},"->",{text:"",iconCls:"x-tbar-loading",scope:this,handler:function(){Ext.each(this.getSelectionModel().getSelectedNodes(),function(a){a.reload()},this)}}],root:new Ext.tree.AsyncTreeNode({expanded:false,pid:"root"}),keys:[{key:Ext.EventObject.DELETE,scope:this,handler:this.onDeleteNodes}],trackMouseOver:false,ddGroup:"AeroSQL",rootVisible:false,enableDD:true,animate:false,containerScroll:true,selModel:new Ext.tree.MultiSelectionModel()});AeroSQL.DBTree.superclass.initComponent.apply(this,arguments);this.tplInfo=new Ext.XTemplate('<table class="node-info"><tpl for="_info"><tr><td><b>{k}</b></td><td>{v}</td></tr></tpl></table>',{compiled:true});this.on("beforemovenode",this.onBeforeMoveNode,this);this.on("beforeclick",this.onBeforeClick,this);this.on("contextmenu",this.onContextMenu,this);this.on("expandnode",function(a){if(a===this.root){this.root.childNodes[0].select()}},this);this.loader.on("beforeload",function(b,a){this.baseParams.crumb=a.getPath("pid")},this.loader);this.loader.on("loadexception",function(a,c,b){c.leaf=false;c.loaded=false;Ext.Msg.show({title:"Error",msg:b.responseText,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},this.loader);this.root.expand()},onContextMenu:function(b,d){d.stopEvent();if(this.getSelectionModel().getSelectedNodes().length<2){b.select()}var a;var c=b.attributes.iconCls;if(c=="icon-server"){a=this.getContextMenu("server")}else{if(c=="icon-db"){a=this.getContextMenu("db")}else{if(c=="icon-tbl2"||c=="icon-tblview2"||c=="icon-tblview_off2"){a=this.getContextMenu("table")}else{return}}}a.contextNode=b;a.showAt(d.getXY())},afterRender:function(){AeroSQL.DBTree.superclass.afterRender.apply(this,arguments)},onBeforeMoveNode:function(a,e,c,d,b){return false},onBeforeClick:function(a,b){if(a.attributes._info){this.tplInfo.overwrite(this.pnInfo.body,a.attributes)}else{this.pnInfo.body.update("")}this.pnInfo.setTitle(a.text);return true},manageNode:function(){this.selectPath("/root/neonetMD/biomass/tables/site","pid")},newSqlQuery:function(){var b=this.getSelectionModel().getSelectedNodes();if(!b){return}for(var a=0;a<b.length;a++){var c=b[a];this.openSqlQuery(c,a+1==b.length)}},openSqlQuery:function(c,f){var j=this._explodePids(c.getPath("pid"));var g=j[0];var d=this.getRootNode().findChild("pid",g);var k=d.text;var h=j[1]||null;dbList=[];for(var e=0;e<d.childNodes.length;e++){var a=d.childNodes[e];dbList.push(a.text)}var b=new AeroSQL.SqlQuery({serverId:g,serverTitle:k,dbName:h,dbList:dbList});this.pnWnd.add(b);if(f){this.pnWnd.setActiveTab(b);this.pnWnd.doLayout()}},_delNodes:function(b){var c=[];Ext.each(b,function(d){c.push(d.getPath("pid"))},this);var a=c.join(",");Ext.Ajax.request({url:AeroSQL.ENGINE_URL,params:{cmd:"treeDelNodes",crumbs:a},success:function(g,e){var f=Ext.decode(g.responseText);AeroSQL.logSql(f.debugSQL);for(var d=b.length-1;d>=0;d--){var h=b[d];if(!h){continue}if(f.deletedNodes.indexOf(h.getPath("pid"))!=-1){h.remove()}}if(!f.success){Ext.Msg.show({title:"Error",msg:Ext.encode(f.msg),buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}}.createDelegate(this),failure:function(e,d){Ext.Msg.show({title:"Server Error",msg:"An Internal Server Error occured",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})},onDeleteNodes:function(){nodes=this.getSelectionModel().getSelectedNodes();if(!nodes.length){return}if(nodes.length>1){var a="Drop "+nodes.length+" objects ?"}else{var a="Drop '"+nodes[0].attributes.pid+"' object ?"}Ext.Msg.show({title:"Drop object...",msg:a,icon:Ext.Msg.QUESTION,buttons:Ext.Msg.YESNO,scope:this,fn:function(b){if(b=="yes"){this._delNodes(nodes)}}})},getContextMenu:function(a){switch(a){case"server":if(!this.cmMenuServer){this.cmMenuServer=new Ext.menu.Menu({items:[{text:"Process List",disabled:true},{text:"System Variables",disabled:true},{text:"Status Variables",disabled:true}]})}return this.cmMenuServer;break;case"db":if(!this.cmMenuDatabase){this.cmMenuDatabase=new Ext.menu.Menu({items:[{text:"Create Database...",disabled:true},{text:"Drop Database",disabled:true}]})}return this.cmMenuDatabase;break;case"table":if(!this.cmMenuTable){this.cmMenuTable=new Ext.menu.Menu({items:[{text:"Edit Data",iconCls:"icon-tbl_edit",handler:this.onTblEdit,scope:this},{text:"Manage Columns",iconCls:"icon-col_man",disabled:true},{text:"Manage Indexes",iconCls:"icon-idx_man",disabled:true},"-",{text:"Rename",iconCls:"icon-edit",disabled:true},{text:"Drop",iconCls:"icon-minus",handler:this.onDeleteNodes,scope:this}]})}return this.cmMenuTable;break}},onTblEdit:function(){var b=this.getSelectionModel().getSelectedNodes();if(!b){return}for(var a=0;a<b.length;a++){var c=b[a];var d=c.attributes.iconCls;if(d=="icon-tbl2"||d=="icon-tblview2"||d=="icon-tblview_off2"){this.editTableData(c,a+1==b.length)}}},editTableData:function(c,b){var d=this._explodePids(c.getPath("pid"));var a=new AeroSQL.DBTable({serverId:d[0],dbName:d[1],tblName:d[3]});this.pnWnd.add(a);if(b){this.pnWnd.setActiveTab(a);this.pnWnd.doLayout()}},_explodePids:function(b){var a=b.split("/");a.shift();a.shift();return a}});Ext.reg("meDBTree",AeroSQL.DBTree);Ext.namespace("AeroSQL");AeroSQL.EditorSqlGridPanel=Ext.extend(Ext.grid.EditorGridPanel,{initComponent:function(){this.addEvents("syncStoreControls");this.colModel=new Ext.grid.ColumnModel([]);this.view=new Ext.grid.GridView({getRowClass:this._getRowClass.createDelegate(this)});this.jrReader=new Ext.data.JsonReader();this._initStore();this._createButtons();if(this.mode=="query"){this._createQueryFooter()}else{this._createTableFooter()}Ext.apply(this,{bbar:this._bbar,keys:[{key:Ext.EventObject.DELETE,ctrl:true,scope:this,handler:this.delRow},{key:Ext.EventObject.INSERT,scope:this,handler:this.addRow}]});AeroSQL.EditorSqlGridPanel.superclass.initComponent.apply(this,arguments);this.on({beforeedit:{fn:function(b){var a=this._fieldsHash["_"+b.field];if(!a._blob){return true}if(!this.gridTxtEditor){this.gridTxtEditor=new AeroSQL.GridTextEditor()}this.gridTxtEditor.editItem(b);return false},scope:this},afteredit:{fn:function(a){if(this._fieldsHash["_"+a.field]._calculated){a.record.reject()}},scope:this}})},afterRender:function(){AeroSQL.EditorSqlGridPanel.superclass.afterRender.apply(this,arguments);if(this.mode=="table"){this._insertTBButtons()}if(this.mode=="query"){for(var a=0;a<6;a++){this._bbar.items.get(a).hide()}}else{}},_insertTBButtons:function(){var a=this._bbar;a.insertButton(0,new Ext.Toolbar.Separator());a.insertButton(0,this._rowCountButton);a.insertButton(0,new Ext.Toolbar.Separator());a.insertButton(0,this._errButton);a.insertButton(0,new Ext.Toolbar.Fill());a.insertButton(0,this._cellMenuButton);a.insertButton(0,new Ext.Toolbar.Separator());a.insertButton(0,this._cancelButton);a.insertButton(0,this._saveButton);a.insertButton(0,new Ext.Toolbar.Separator());a.insertButton(0,this._delRowButton);a.insertButton(0,this._addRowButton)},colHiddenChange:function(){var a=this.getColumnModel();var b=[];var d=this._serverResp.uniqueIndex;for(var c=0;c<a.getColumnCount();c++){var e=a.getDataIndex(c);if(!a.isHidden(c)||d.indexOf(e)!=-1){b.push(e)}}this.tblColumns=b.join(",");this.getStore().baseParams.cols=this.tblColumns},_createButtons:function(){this._addRowButton=new Ext.Toolbar.Button({text:"Add",handler:this.addRow,iconCls:"icon-plus",hidden:false,scope:this});this._delRowButton=new Ext.Toolbar.Button({text:"Delete",handler:this.delRow,iconCls:"icon-minus",hidden:true,scope:this});this._saveButton=new Ext.Toolbar.Button({text:"Save",handler:this._onSaveBtnClick,iconCls:"icon-save",hidden:true,disabled:true,scope:this});this._cancelButton=new Ext.Toolbar.Button({text:"Cancel",handler:this._onCancelBtnClick,iconCls:"icon-cancel",hidden:true,disabled:true,scope:this});this._errButton=new Ext.Toolbar.Button({text:"no errors",handler:this._onErrBtnClick,iconCls:"icon-ok",hidden:false,scope:this});this._rowCountButton=new Ext.Toolbar.TextItem({text:"no data",scope:this});this._cellMenuButton=new Ext.Toolbar.Button({text:"Cell",iconCls:"icon-tbl_edit2",scope:this,menu:{items:[{text:AeroSQL.NULL_VALUE,handler:function(){this.cellUpdate("null")},scope:this},"-",{text:"Uppercase",handler:function(){this.cellUpdate("uppercase")},scope:this},{text:"Lowercase",handler:function(){this.cellUpdate("lowercase")},scope:this}]}})},_createQueryFooter:function(){this._bbar=new Ext.Toolbar([this._addRowButton,this._delRowButton,"-",this._saveButton,this._cancelButton,"-",this._cellMenuButton,"->",this._errButton,"-",this._rowCountButton])},_createTableFooter:function(){this._bbar=new Ext.PagingToolbar({pageSize:20,store:this.store,displayInfo:false,listeners:{change:{fn:this._syncStoreControls,scope:this}}})},_onCancelBtnClick:function(){var d=this.getStore();var a=d.getModifiedRecords();for(var b=a.length-1;b>=0;b--){var c=a[b];if(c.data._newRecord){d.remove(c)}}this.getStore().rejectChanges()},_onSaveBtnClick:function(){var a=this.getStore().getModifiedRecords();if(!a.length){return}var b={};b.update=[];b.insert=[];b.uniqueIndex=this._serverResp.uniqueIndex;b.autoIncCol=this._serverResp.autoIncCol;Ext.each(a,function(e,d){var f=e.getChanges();f._gridId=e.get("_gridId");if(e.data._newRecord){this._setImplicitDefaults(f);b.insert.push(f);this._removeTimePart(f)}else{b.update.push([this._getRecIdx(e),f]);this._removeTimePart(f)}},this);var c={url:AeroSQL.ENGINE_URL,params:{cmd:"tblSaveRows",data:Ext.encode(b),serverId:this.serverId,db:this._serverResp.dbName,tbl:this._serverResp.tblName},method:"post",callback:this._callbackSaveRows,scope:this};Ext.Ajax.request(c)},_removeTimePart:function(b){for(var a in b){if(a=="_gridId"){continue}if(this._fieldsHash["_"+a]["_ct"]=="date"&&b[a]!==null&&typeof(b[a])=="object"){t=b[a].format("Y-m-d");b[a]=t}}},_callbackSaveRows:function(f,i,d){if(true!==i){this._showError(d.responseText);return}try{var g=Ext.decode(d.responseText)}catch(h){this.showError(d.responseText,"Cannot decode JSON object");return}AeroSQL.logSql(g.debugSQL);switch(f.params.cmd){case"tblSaveRows":this._serverResp.errors=g.errors;this._serverResp.warnings=g.warnings;this._serverResp.msg=g.msg;this._showResultStatus();var c=this.getStore().getModifiedRecords();var b=[];Ext.each(c,function(j,e){var a=j.data._gridId;if(g.update[a]){b.push(j)}else{if(g.insert[a]){this._updateInsertedRec(j,g.insert[a]);delete (j.data._newRecord);b.push(j)}}},this);Ext.each(b,function(a){a.commit()});break;case"deleteData":break}},_showError:function(b,a){Ext.Msg.show({title:a||"Error",msg:Ext.util.Format.ellipsis(b,2000),icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,minWidth:1200>String(b).length?360:600})},_updateInsertedRec:function(c,b){for(var a in b){if(this._fieldsHash["_"+a]=="date"){Date.parseDate(b[a],"Y-m-d")}else{c.set(a,b[a])}}},_getRecIdx:function(e){var c=[];var b=this._serverResp.uniqueIndex;for(var d=0;d<b.length;d++){var f=b[d];if(e.modified){if(e.modified[f]==undefined){c.push(e.data[f])}else{c.push(e.modified[f])}}else{c.push(e.data[f])}}return c},_setImplicitDefaults:function(c){var b=this._serverResp.colDefaults;for(var a in b){if(typeof(c[a])=="undefined"){c[a]=b[a]}}},addRow:function(){if(!this.isLiveGrid){return}var b=this.getStore();if(b.recordType){var c=new b.recordType({_newRecord:true,_gridId:this._nextGridId});this._nextGridId++;c.fields.each(function(d){c.data[d.name]=typeof(d.defaultValue)!="undefined"?d.defaultValue:null});c.commit();b.add(c);var a=c.data._gridId;c.beginEdit();c.set("_gridId",a+1);c.set("_gridId",a);c.endEdit();this.focus();this.getSelectionModel().select(b.indexOf(c),0);return c}},delRow:function(){Ext.Msg.show({title:"Confirm Row Delete",msg:"Are you sure you want to delete row ?<br />There is no undo.",icon:Ext.Msg.QUESTION,buttons:Ext.Msg.YESNO,scope:this,fn:function(a){var f=this.getSelectionModel();var d=this.getStore();if("yes"!==a||!f.hasSelection()){return}var e=d.getAt(f.getSelectedCell()[0]);if(!this.isLiveGrid||e.data._newRecord){var b=d.indexOf(e);d.remove(e);this.focus();if(d.getCount()==b){b--}this.getSelectionModel().select(b,0);return}var c={};c.uniqueIndex=this._serverResp.uniqueIndex;c.row=this._getRecIdx(e);Ext.Ajax.request({url:AeroSQL.ENGINE_URL,params:{cmd:"tblDelRow",serverId:this.serverId,db:this._serverResp.dbName,tbl:this._serverResp.tblName,rec:Ext.util.JSON.encode(c)},success:function(k,h){var j=Ext.decode(k.responseText);AeroSQL.logSql(j.debugSQL);if(j.affectedRows){var g=d.indexOf(e);d.remove(e);this.focus();if(d.getCount()==g){g--}this.getSelectionModel().select(g,0)}else{this._serverResp.errors=j.errors;this._serverResp.warnings=j.warnings;this._serverResp.msg=j.msg;this._showResultStatus()}},failure:function(h,g){Ext.Msg.alert("Server Side Error","Unable to delete row")},scope:this})}})},cellUpdate:function(e){var a=this.getSelectionModel().getSelectedCell();if(a===null){return}var d=this.getColumnModel().getDataIndex(a[1]);if(this._fieldsHash["_"+d]._calculated){return}var c=this.getStore().getAt(a[0]);var b=c.data[d];if(e=="null"){b=null}else{if(e=="uppercase"){b=b.toUpperCase()}else{if(e=="lowercase"){b=b.toLowerCase()}}}c.set(d,b)},_getRowClass:function(d,a,c,b){if(!this.isLiveGrid){return""}if(d.get("_newRecord")){return"ux-grid3-new-row"}if(d.dirty){return"ux-grid3-dirty-row"}return""},_onErrBtnClick:function(){var d='<ol style="list-style-type: decimal; padding-left: 32px">';var b=this._serverResp.msg;for(var c=0;c<b.length;c++){d+='<li><span style="background-repeat: no-repeat; padding-right: 18px; padding-bottom: 16px" class="';d+=b[c]["Level"]=="Error"?"icon-err":"icon-warn";d+='"></span>'+b[c]["Message"]+"</li>"}d+="</ol>";Ext.Msg.show({title:"SQL messages: "+this._errButton.getText(),msg:d,buttons:Ext.MessageBox.OK})},_initStore:function(){if(this.mode=="table"){this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:AeroSQL.ENGINE_URL,method:"POST"}),baseParams:{cmd:"fetchTableRows",serverId:this.serverId,db:this.dbName,tbl:this.tblName,cols:this.tblColumns},reader:this.jrReader,autoLoad:false,remoteSort:true,pruneModifiedRecords:true})}else{this.store=new Ext.data.Store({reader:this.jrReader,autoLoad:false,remoteSort:false,pruneModifiedRecords:true})}this.store.on({metachange:{fn:this._storeMetaChange,scope:this},load:{fn:this._storeLoad,scope:this},datachanged:{fn:this._syncStoreControls,scope:this},update:{fn:this._syncStoreControls,scope:this},add:{fn:this._storeNewRecord,scope:this},clear:{fn:this._syncStoreControls,scope:this},remove:{fn:this._syncStoreControls,scope:this}})},_preserveNullValue:function(a){return a==null?null:a},_storeNewRecord:function(a,b){this._syncStoreControls()},_storeMetaChange:function(b,e){var d=[];Ext.each(e.fields,function(f){if(f.header==undefined){return}f.dataIndex=f.name;switch(f.type){case"int":this._colSetupInt(f);break;case"string":this._colSetupString(f);break;case"float":this._colSetupFloat(f);break;case"date":this._colSetupDate(f);break}d.push(f)},this);var a=new Ext.grid.ColumnModel(d);if(e.defaultSortable!=undefined){a.defaultSortable=e.defaultSortable}var c=this.store;this.reconfigure(c,a);this.colModel.on("hiddenchange",this.colHiddenChange,this)},_storeLoad:function(b,a){if(!this.isLiveGrid){return true}Ext.each(a,function(d,c){d.data._gridId=c+1});this._nextGridId=a.length+1},_syncStoreControls:function(){var a=this.getStore().getModifiedRecords().length>0;var b=this.getStore().getCount();if(b){b=this.mode=="table"?(this._bbar.cursor+1)+" - "+(this._bbar.cursor+b)+" of "+this.getStore().getTotalCount():"rows: "+b}else{b="no data"}Ext.fly(this._rowCountButton.getEl()).update(b);if(a){this._saveButton.enable();this._cancelButton.enable()}else{this._saveButton.disable();this._cancelButton.disable()}this.fireEvent("syncStoreControls",this,a)},openTable:function(){this.getEl().mask("Loading...","x-mask-loading");Ext.Ajax.request({url:AeroSQL.ENGINE_URL,params:{cmd:"execQuery",mode:"table",serverId:this.serverId,dbName:this.dbName,tbl:this.tblName,cols:this.tblColumns,limit:20},success:this._execQueryCallback,scope:this})},execQuery:function(b,a,c){this.getEl().mask("Loading...","x-mask-loading");Ext.Ajax.request({url:AeroSQL.ENGINE_URL,params:{cmd:c?"execMultiQuery":"execQuery",mode:"query",serverId:this.serverId,dbName:b,sql:a},success:this._execQueryCallback,scope:this})},_execQueryCallback:function(b,a){this._serverResp=Ext.util.JSON.decode(b.responseText);this._adjustServerResp();this.isLiveGrid=this._serverResp.live;this._nextGridId=1;this._syncLiveControls();this._showResultStatus();AeroSQL.logSql(this._serverResp.debugSQL);if(this._serverResp.rows){this.getStore().loadData(this._serverResp)}else{this._clearGrid()}this.getEl().unmask()},_syncLiveControls:function(){var c=this.getBottomToolbar();for(var b=0;b<6;b++){var a=c.items.get(b);this.isLiveGrid?a.show():a.hide()}},_showResultStatus:function(){var d=this._serverResp;var a=this._errButton;var b="no errors";var e="";if(d.errors){a.setIconClass("icon-err");b=d.errors+" errors";e="FF7070";if(d.warnings){b+=" / "+d.warnings+" warnings"}}else{if(d.warnings){a.setIconClass("icon-warn");e="ffff00";b=d.warnings+" warnings";if(d.isAffected){b+=" / "+d.affectedRows+" rows affected"}}else{if(d.isAffected){a.setIconClass("icon-ok");b=d.affectedRows+" rows affected";e="7CFF7E"}else{a.setIconClass("icon-ok")}}}a.setText(b);if(e){a.getEl().highlight(e)}},_clearGrid:function(){var b=this.store;var a=new Ext.grid.ColumnModel([]);this.reconfigure(b,a);b.removeAll()},_adjustServerResp:function(){var g=this._serverResp;if(!g.metaData){return}var b=0;var c=[];var f=g.metaData.fields;for(var e=0;e<f.length;e++){field=f[e];c["_"+field.name]=field;if(field.type!="date"){field.convert=this._preserveNullValue}if(field._key){var d="idx";if(field._key=="pri"){d+="_pri"}else{if(field._key=="uni"){d+="_uni"}}b++;d+=b;field.id=d}}this._fieldsHash=c},execMultiQuery:function(a){},editTable:function(b,a,c){},_colSetupInt:function(a){a.align="right";a.renderer=this._colRenderNumber;a.editor=new Ext.form.NumberField({allowDecimals:false,allowNegative:!a._unsigned})},_colSetupFloat:function(a){a.align="right";a.editor=new Ext.form.NumberField({allowDecimals:true,allowNegative:!a._unsigned})},_colSetupDate:function(a){a.renderer=this._colRenderDate;a.editor=new Ext.form.DateField({format:"Y-m-d"})},_colSetupString:function(b){var c=b._ct;var a=b._ctl;if(c.indexOf("char")>-1||c.indexOf("binary")>-1){b.renderer=this._colRenderString;b.editor=new Ext.form.TextField({maxLength:b._maxLen||255})}else{if(c=="enum"){b.editor=new Ext.form.ComboBox({lazyRender:true,store:a.substring(6,a.indexOf(")")-1).split("','"),mode:"local",selectOnFocus:"false",triggerAction:"all"})}else{if(c.indexOf("text")>-1){b.renderer=this._colRenderText;b.align="center";b.editor=new Ext.form.TextField()}else{if(c.indexOf("blob")>-1){b.renderer=this._colRenderBlob;b.align="center"}else{b.editor=new Ext.form.TextField();b.renderer=this._colRenderString}}}}},_colRenderNumber:function(e,a,b,f,d,c){if(e!=0){return e}else{if(e!==null){return'<span style="color:#AAA;">'+e+"</span>"}else{return AeroSQL.NULL_VALUE}}},_colRenderString:function(e,a,b,f,d,c){if(e){return Ext.util.Format.htmlEncode(e)}else{if(e!==null){return""}else{return AeroSQL.NULL_VALUE}}},_colRenderText:function(e,a,b,f,d,c){if(e){return'<img style="height: 13px; width: 10px;" src="i/doc.png" />'}else{if(e!=null){return""}else{return AeroSQL.NULL_VALUE}}},_colRenderBlob:function(e,a,b,f,d,c){if(e){return'<img style="height: 13px; width: 10px;" src="i/doc.png" />'}else{if(e!=null){return""}else{return AeroSQL.NULL_VALUE}}},_colRenderDate:function(a){if(a!=null){if(a==""){return""}else{if(typeof(a)==="string"){return a}else{return a.dateFormat("Y-m-d")}}}else{return AeroSQL.NULL_VALUE}}});AeroSQL.myPagingToolbar=Ext.extend(Ext.PagingToolbar,{onRender:function(b,a){Ext.PagingToolbar.superclass.onRender.call(this,b,a);this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.onClick.createDelegate(this,["first"])});this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.onClick.createDelegate(this,["prev"])});this.addSeparator();this.add(this.beforePageText);this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el);this.field.on("keydown",this.onPagingKeydown,this);this.field.on("focus",function(){this.dom.select()});this.afterTextEl=this.addText(String.format(this.afterPageText,1));this.field.setHeight(18);this.addSeparator();this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.onClick.createDelegate(this,["next"])});this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.onClick.createDelegate(this,["last"])});this.addSeparator();this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])});if(this.displayInfo){this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"})}if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}}});Ext.namespace("AeroSQL");AeroSQL.GridTextEditor=Ext.extend(Ext.Window,{initComponent:function(){this.txtPanel=new Ext.Panel({title:"Text",layout:"fit"});this.htmlPanel=new Ext.Panel({title:"HTML",layout:"fit"});this.tp=new Ext.TabPanel({xtype:"tabpanel",border:true,hideBorders:true,plain:true,layoutOnTabChange:true,tabPosition:"bottom",items:[this.txtPanel,this.htmlPanel],listeners:{beforetabchange:{fn:this.prepareTabPanel,scope:this},tabchange:{buffer:10,fn:function(b,a){a==this.txtPanel?this.txtEdit.focus():this.htmlEdit.focus()},scope:this}}});Ext.apply(this,{plain:true,closable:true,iconCls:"icon-txt",height:420,width:550,layout:"fit",closeAction:"hide",border:false,items:[this.tp],buttons:[{text:"OK",iconCls:"icon-ok",handler:this.saveItem,scope:this},{text:"Cancel",iconCls:"icon-cancel",handler:this.cancelItem,scope:this}]});AeroSQL.GridTextEditor.superclass.initComponent.apply(this,arguments);this.on("show",function(){this.tp.getActiveTab()==this.txtPanel?this.txtEdit.focus():this.htmlEdit.focus()},this,{buffer:10});this.on("hide",function(){var a=this._editObj;a.grid.getView().focusCell(a.row,a.column)},this,{buffer:50})},prepareTabPanel:function(a,c,b){if(c.title=="Text"){if(!this.txtEdit){this.txtEdit=new Ext.form.TextArea({});c.add(this.txtEdit)}if(this.htmlEdit){v=this.htmlEdit.getValue()}else{v=this._editObj.value}this.txtEdit.setValue(v)}else{if(!this.htmlEdit){this.htmlEdit=new Ext.form.HtmlEditor({});c.add(this.htmlEdit)}if(this.txtEdit){v=this.txtEdit.getValue()}else{v=this._editObj.value}this.htmlEdit.setValue(v)}},saveItem:function(){var a=this.tp.getActiveTab()==this.txtPanel?this.txtEdit.getValue():this.htmlEdit.getValue();this._editObj.record.set(this._editObj.field,a);this.hide()},cancelItem:function(){this.hide()},editItem:function(b){this._editObj=b;this.setTitle(b.field);var a=this.tp.getActiveTab();if(a==this.txtPanel){this.txtEdit.setValue(b.value)}else{if(a==this.htmlPanel){this.htmlEdit.setValue(b.value)}else{this.tp.activate(this.txtPanel)}}this.show()}});Ext.namespace("AeroSQL");AeroSQL.Monitor=Ext.extend(Ext.Panel,{initComponent:function(){Ext.Ajax.extraParams={debugSQL:5};Ext.apply(this,{title:"SQL Monitor",closable:true,iconCls:"icon-terminal",bodyStyle:"background-color: #F0F0F0; padding: 5px",autoScroll:true,layout:"fit",border:false,tbar:[{text:"Clear",iconCls:"icon-cancel",handler:function(){this.logData="";this.body.update("")},scope:this},"->",{text:"Options",iconCls:"icon-gear",disabled:true,scope:this}]});AeroSQL.Monitor.superclass.initComponent.apply(this,arguments);this.on("beforedestroy",function(){Ext.Ajax.extraParams={debugSQL:0}},this)},log:function(d){if(!this.logData){this.logData=""}if(!d){return}if(typeof(d)=="string"){this.logData+=d+"\n\n"}else{for(var b=0;b<d.length;b++){this.logData+=d[b]+"\n\n"}}var c=hljs.highlight("sql",this.logData);var a='<pre><code class="sql">'+c.value+"</code></pre>";this.body.update(a)}});Ext.namespace("AeroSQL");AeroSQL.SqlQuery=Ext.extend(Ext.Panel,{initComponent:function(){this.queryEdit=new Ext.form.TextArea({value:"",enableKeyEvents:true,listeners:{keypress:{fn:function(a,b){if(b.getKey()==b.ENTER&&b.ctrlKey){this.execSql(false)}},scope:this}}});this._execButton=new Ext.SplitButton({text:"Execute",iconCls:"icon-sql",handler:function(){this.execSql(false)},scope:this,menu:{items:[{text:"Execute Batch",iconCls:"icon-sql_multi",handler:function(){this.execSql(true)},scope:this},{text:"Execute Script...",iconCls:"icon-docsql",disabled:true,scope:this}]}});this._forceFitButton=new Ext.menu.CheckItem({disabled:true,text:"ForceFit",handler:function(b,a){this.sqlGrid.forceFit=a},scope:this});this.createDbCombo();this.queryPanel=new Ext.Panel({region:"north",split:true,height:120,minSize:50,layout:"fit",border:false,tbar:[this.icDbCombo,"-",{text:"Explain",iconCls:"icon-info",handler:this.explainQuery,scope:this},this._execButton,"->",{text:"Options",iconCls:"icon-gear",disabled:true,menu:{items:[this._forceFitButton]},scope:this},"-",{text:"Export",iconCls:"icon-tbl_disk",disabled:true,scope:this}],items:[this.queryEdit]});this.resEdit=new Ext.form.TextArea({title:"Fields"});this.sqlGrid=new AeroSQL.EditorSqlGridPanel({region:"center",border:false,mode:"query",serverId:this.serverId,forceFit:true});Ext.apply(this,{title:"Query ["+this.serverTitle+"]",closable:true,iconCls:"icon-sql",layout:"border",border:false,items:[this.queryPanel,this.sqlGrid]});AeroSQL.SqlQuery.superclass.initComponent.apply(this,arguments);this.queryEdit.on("render",function(){this.queryEdit.focus();var a=new Ext.dd.DropTarget(this.queryEdit.getEl(),{ddGroup:"AeroSQL",notifyDrop:function(b,d,c){this.queryEdit.setValue(this.queryEdit.getValue()+" "+c.node.attributes.pid);return true}.createDelegate(this)})},this)},afterRender:function(){AeroSQL.SqlQuery.superclass.afterRender.apply(this,arguments)},createDbCombo:function(){var b=[["[none]","icon-warn"]];for(var c=0;c<this.dbList.length;c++){b.push([this.dbList[c],"icon-db"])}v=this.dbName||"[none]";this.icDbCombo=new Ext.ux.IconCombo({width:150,store:new Ext.data.SimpleStore({fields:["dbName","icon"],data:b}),valueField:"dbName",displayField:"dbName",iconClsField:"icon",triggerAction:"all",mode:"local",value:v,listeners:{change:{fn:function(d,a){this.dbName=a=="[none]"?null:a},scope:this}}})},explainQuery:function(){var a="EXPLAIN "+this.queryEdit.getValue();this.sqlGrid.execQuery(this.dbName,a,false)},execSql:function(b){var a=this.queryEdit.getValue();this.sqlGrid.execQuery(this.dbName,a,b)}});Ext.namespace("AeroSQL");AeroSQL.ENGINE_URL="engine.php";Ext.BLANK_IMAGE_URL="i/extjs-blank.gif";AeroSQL.NULL_VALUE='<img style="width: 24px; height: 11px; vertical-align: middle" src="i/null.png" />';hljs.initHighlightingOnLoad();Ext.onReady(function(){Ext.QuickTips.init();Ext.Ajax.extraParams={debugSQL:0};Ext.apply(Ext.QuickTips.getQuickTip(),{showDelay:1500});var c=new Ext.TabPanel({region:"center",items:[{title:"Dashboard",xtype:"panel"}]});AeroSQL.mainTabPanel=c;var e=new Ext.Panel({region:"south",height:160,collapsible:true,split:true,bodyStyle:"background-color: #eee;",autoScroll:true,title:"Info",iconCls:""});var b=new AeroSQL.DBTree({region:"center",title:"",width:250,autoScroll:true,split:true,pnWnd:c,pnInfo:e});var d=new Ext.Panel({region:"west",collapsible:true,collapseMode:"mini",split:true,animate:false,border:false,width:250,layout:"border",items:[b,e]});var a=new Ext.Viewport({layout:"border",items:[{region:"north",xtype:"toolbar",items:[{text:"Server",menu:{items:[{text:"Process List",disabled:true},"-",{text:"System Variables",disabled:true},{text:"Status Variables",disabled:true},"-",{text:"Flush...",disabled:true},"-",{text:"Exit",hidden:true,handler:function(){window.close()},scope:this}]}},{text:"Database",menu:{items:[{text:"Create Database...",disabled:true},{text:"Drop Database",disabled:true}]}},{text:"Table",menu:{items:[{text:"Edit Data",iconCls:"icon icon-tbl_edit",handler:b.onTblEdit,scope:b},"-",{text:"Manage Columns",iconCls:"icon-col_man",disabled:true},{text:"Manage Indexes",iconCls:"icon-idx_man",disabled:true}]}},"-",{text:"Tools",menu:{items:[{text:"SQL Monitor",iconCls:"icon-terminal",handler:SqlMonitorClick,scope:this}]}},"->",{text:"About",iconCls:"icon-info",handler:function(){var f=new AeroSQL.About();f.show()},scope:this},{text:"Homepage",iconCls:"icon-globe",handler:function(){window.open("http://www.burlaca.com/aerosql/","homepage")}}]},d,c]});AeroSQL.logSql=function(f){var g=Ext.getCmp("pnSqlMonitor");if(!g){return}g.log(f)};setTimeout(function(){Ext.get("loading").remove();Ext.fly("loading-mask").fadeOut({remove:true,callback:function(){}})},250)});function SqlMonitorClick(){var b=AeroSQL.mainTabPanel;var a=Ext.getCmp("pnSqlMonitor");if(a){b.setActiveTab(a)}else{a=new AeroSQL.Monitor({id:"pnSqlMonitor"});b.add(a);b.setActiveTab(a);b.doLayout()}}Ext.ux.IconCombo=Ext.extend(Ext.form.ComboBox,{initComponent:function(){Ext.apply(this,{tpl:'<tpl for="."><div class="x-combo-list-item ux-icon-combo-item {'+this.iconClsField+'}">{'+this.displayField+"}</div></tpl>"});Ext.ux.IconCombo.superclass.initComponent.call(this)},onRender:function(b,a){Ext.ux.IconCombo.superclass.onRender.call(this,b,a);this.wrap.applyStyles({position:"relative"});this.el.addClass("ux-icon-combo-input");this.icon=Ext.DomHelper.append(this.el.up("div.x-form-field-wrap"),{tag:"div",style:"position:absolute"})},setIconCls:function(){var a=this.store.query(this.valueField,this.getValue()).itemAt(0);if(a){this.icon.className="ux-icon-combo-icon "+a.get(this.iconClsField)}},setValue:function(a){Ext.ux.IconCombo.superclass.setValue.call(this,a);this.setIconCls()}});Ext.reg("iconcombo",Ext.ux.IconCombo);